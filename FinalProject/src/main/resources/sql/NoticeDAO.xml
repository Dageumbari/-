<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTDEMapper3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bit.model.dao.NoticeDAO">

	<select id="getAllNoticeInfo"
		resultType="com.bit.model.vo.NoticeVO">     
	 <![CDATA[select * from 
	 (select notice.NOTICENO,notice.NOTICETITLE,notice.NOTICEDATE,admin_info.adminId
			from notice
			inner join admin_info 
			on admin_info.admincode=notice.admincode) 
			where noticeNo>0]]>
	</select>

	<insert id="insert">
		insert into
		notice(NOTICEDATE,NOTICECONTENT,NOTICENO,NOTICETITLE,ADMINCODE)
		values
		(#{NOTICEDATE},#{NOTICECONTENT},seq_notice.nextval,#{NOTICETITLE},#{ADMINCODE})
	</insert>
	<!-- insert into notice (NOTICENO,NOTICETITLE,NOTICECONTENT,NOTICEDATE) 
		select notice.NOTICENO,notice.NOTICETITLE,notice.NOTICECONTENT,notice.NOTICEDATE 
		from notice inner join admin_info using(admin_info.admincode) where status 
		= '1' group by noticeno insert into (select notice.NOTICENO,notice.NOTICETITLE,notice.NOTICECONTENT,notice.NOTICEDATE,admin_info.adminId 
		from notice inner join admin_info on admin_info.admincode=notice.admincode) 
		where(notice.NOTICENO,notice.NOTICETITLE,notice.NOTICECONTENT,notice.NOTICEDATE,admin_info.adminId) 
		values (seq_notice.nextval,#{NOTICETITLE},#{NOTICECONTENT},#{NOTICEDATE},#{ADMINID}) -->

	<select id="read" resultType="com.bit.model.vo.NoticeVO">
		select * from
		(select
		notice.NOTICENO,notice.NOTICETITLE,notice.NOTICEDATE,admin_info.adminId
		from notice
		inner join admin_info
		on
		admin_info.admincode=notice.admincode)
		where
		noticeNo=#{noticeNo}
	</select>

	<delete id="delete">
		delete from notice where noticeNo=#{noticeNo}
	</delete>

	<update id="update">
		update notice
		set
		NOTICETITLE=#{NOTICETITLE},
		NOTICECONTENT=#{NOTICECONTENT},
		NOTICEDATE =
		SYSDATE
		where
		noticeNo=#{noticeNo}
	</update>

	<select id="getListwithPaging"
		resultType="com.bit.model.vo.NoticeVO">
	 <![CDATA[
		 select NOTICEDATE,NOTICECONTENT,NOTICENO,NOTICETITLE,ADMINid
		 from
		 (select /*+INDEX_ASC(NOTICE NOTICENO) */
		 rownum rn,NOTICEDATE,NOTICECONTENT,NOTICENO,NOTICETITLE,ADMINID
		 FROM 
		 (select
				notice.NOTICENO,notice.NOTICETITLE,NOTICE.NOTICECONTENT,notice.NOTICEDATE,admin_info.adminId
				from notice
				inner join admin_info
				on admin_info.admincode=notice.admincode)
		 WHERE ROWNUM <= #{pageNo}*#{noticeAmount}
		 )
		 WHERE rn > (#{pageNo}-1)*#{noticeAmount}
	 ]]>
	</select>
</mapper>



