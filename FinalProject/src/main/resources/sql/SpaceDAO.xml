<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTDEMapper3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bit.model.dao.SpaceDAO">

	<!-- <resultMap type="com.bit.model.vo.draftVO"
		id="draft_resultmap">
		<id property="draftCode" column="draftCode" />
		<result property="spaceCode" column="spaceCode" />
		<result property="draftStatus" column="draftStatus" />
		<result property="draftSavetime" column="draftSavetime" />
		<association property="com.bit.model.vo.pageGroupVO"
			javaType="pageGroup" column="pageGroupCode">
			<collection property="com.bit.model.vo.PageVO"
				ofType="page" column="pageNo" javaType="List">
			</collection>
		</association>
	</resultMap> -->


	<!-- 드래프트 카드 생성 -->
	<!-- <insert id="insertDraft" parameterType="Map">
		insert into draft values('dr'||lpad(draft_seq.nextval,2,0), 'sp11', sysdate, 'saved');
	</insert> -->


	<!-- sidenavDrawer의 사용자 이름, 스페이스 이름 출력 -->
	<select id="getSpaceUserInfo" resultType="spaceUserInfo">
		select name, spaceName,
		spaceCode, userNo from
		spaceUserInfo where
		userNo=1 and spaceCode='sp11'
	</select>


	<!-- <resultMap type="draftList" id="draftList_resultmap"> <id property="draftCode" 
		column="draftCode" /> <result property="draftSavetime" column="draftSavetime" 
		/> <result property="draftStatus" column="draftStatus" /> <result property="msgNo" 
		column="msgNo" /> <result property="msgContent" column="msgContent" /> <result 
		property="editsCount" column="editsCount" /> <result property="userNo" column="userNo" 
		/> <result property="name" column="name" /> <result property="userImage" 
		column="userImage" /> </resultMap> -->

	<!-- draftList불러오기(only saved) -->
	<select id="getDraftList" resultType="draftList">
		select DRAFTCODE,
		DRAFTSAVETIME, DRAFTSTATUS, MSGCONTENT, EDITSCOUNT,
		NAME, USERIMAGE
		from draftlist
		where spaceCode='sp11' and userNo=1 and
		draftStatus='saved' and
		msgno=(select max(msgno) from draftlist)
	</select>


	<!-- 병합리스트 불러오기(merged) -->
	<select id="getMergedList" resultType="draftList">
		select DRAFTCODE,
		DRAFTSAVETIME, DRAFTSTATUS, MSGCONTENT, EDITSCOUNT,
		NAME,
		USERIMAGE from
		draftlist where spaceCode='sp11' and userNo=1 and
		draftStatus='merged'
		and msgno=(select max(msgno) from draftlist)
	</select>

	<!-- 아카이빙리스트 불러오기(archived) -->
	<select id="getArchivedList" resultType="draftList">
		select DRAFTCODE,
		DRAFTSAVETIME, DRAFTSTATUS, MSGCONTENT, EDITSCOUNT,
		NAME,
		USERIMAGE from
		draftlist where spaceCode='sp11' and userNo=1 and
		draftStatus='archived'
		and msgno=(select max(msgno) from draftlist)
	</select>

</mapper>